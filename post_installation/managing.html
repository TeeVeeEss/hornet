<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Managing node - HORNET Docs</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../welcome.html"><strong aria-hidden="true">1.</strong> Welcome</a></li><li class="chapter-item expanded "><a href="../getting_started/getting_started.html"><strong aria-hidden="true">2.</strong> Getting started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting_started/nodes_101.html"><strong aria-hidden="true">2.1.</strong> Nodes 101</a></li><li class="chapter-item expanded "><a href="../getting_started/security_101.html"><strong aria-hidden="true">2.2.</strong> Security 101</a></li><li class="chapter-item expanded "><a href="../getting_started/installation_steps.html"><strong aria-hidden="true">2.3.</strong> Installation steps</a></li><li class="chapter-item expanded "><a href="../getting_started/using_docker.html"><strong aria-hidden="true">2.4.</strong> Using Docker</a></li><li class="chapter-item expanded "><a href="../getting_started/using_docker_compose.html"><strong aria-hidden="true">2.5.</strong> Using Docker compose</a></li><li class="chapter-item expanded "><a href="../getting_started/bootstrap_from_genesis_snapshot.html"><strong aria-hidden="true">2.6.</strong> Bootstrapping from genesis snapshot</a></li><li class="chapter-item expanded "><a href="../getting_started/private_tangle.html"><strong aria-hidden="true">2.7.</strong> Private Tangle</a></li></ol></li><li class="chapter-item expanded "><a href="../post_installation/post_installation.html"><strong aria-hidden="true">3.</strong> Post-installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../post_installation/managing.html" class="active"><strong aria-hidden="true">3.1.</strong> Managing node</a></li><li class="chapter-item expanded "><a href="../post_installation/config.html"><strong aria-hidden="true">3.2.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../post_installation/peering.html"><strong aria-hidden="true">3.3.</strong> Peering</a></li><li class="chapter-item expanded "><a href="../post_installation/run_as_verifier.html"><strong aria-hidden="true">3.4.</strong> Run as verifier</a></li></ol></li><li class="chapter-item expanded "><a href="../api-reference.html"><strong aria-hidden="true">4.</strong> API Reference</a></li><li class="chapter-item expanded "><a href="../troubleshooting.html"><strong aria-hidden="true">5.</strong> Troubleshooting</a></li><li class="chapter-item expanded "><a href="../faq.html"><strong aria-hidden="true">6.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="../Contribution.html"><strong aria-hidden="true">7.</strong> Contribution</a></li><li class="chapter-item expanded "><a href="../code_of_conduct.html"><strong aria-hidden="true">8.</strong> Code of Conduct</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">HORNET Docs</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="managing-node"><a class="header" href="#managing-node">Managing node</a></h1>
<p>In this chapter, there is an overview of key concepts that are important to consider during a maintenance cycle of your node.</p>
<h2 id="storage"><a class="header" href="#storage">Storage</a></h2>
<p>Hornet uses embedded database engine that stores its data in a directory on file system. The location is controlled via <code>config.json</code> file under the section <code>db</code>, key <code>path</code>:</p>
<pre><code class="language-json">&quot;db&quot;: {
    &quot;engine&quot;: &quot;rocksdb&quot;,
    &quot;path&quot;: &quot;mainnetdb&quot;,
    &quot;autoRevalidation&quot;: false
  }
</code></pre>
<p>There is a convention that the directory is named after the network type: <code>mainnet</code> vs <code>testnet</code>.</p>
<p>Another important directory is a directory dedicated to snapshots controlled via section <code>snapshots</code> of the <code>config.json</code>, specifically <code>fullPath</code> and <code>deltaPath</code> keys:</p>
<pre><code class="language-json">&quot;snapshots&quot;: {
    &quot;interval&quot;: 50,
    &quot;fullPath&quot;: &quot;snapshots/mainnet/full_snapshot.bin&quot;,
    &quot;deltaPath&quot;: &quot;snapshots/mainnet/delta_snapshot.bin&quot;,
    &quot;deltaSizeThresholdPercentage&quot;: 50.0,
    &quot;downloadURLs&quot;: [
      {
        &quot;full&quot;: &quot;https://ls.manapotion.io/full_snapshot.bin&quot;,
        &quot;delta&quot;: &quot;https://ls.manapotion.io/delta_snapshot.bin&quot;
      },
      {
        &quot;full&quot;: &quot;https://x-vps.com/full_snapshot.bin&quot;,
        &quot;delta&quot;: &quot;https://x-vps.com/delta_snapshot.bin&quot;
      },
      {
        &quot;full&quot;: &quot;https://dbfiles.iota.org/mainnet/hornet/full_snapshot.bin&quot;,
        &quot;delta&quot;: &quot;https://dbfiles.iota.org/mainnet/hornet/delta_snapshot.bin&quot;
      }
    ]
</code></pre>
<p>The same convention is applied and directories are named after the network type (<code>mainnet</code> vs <code>testnet</code>).</p>
<p>Here is the full overview of all files and directories that are leveraged by the Hornet:</p>
<pre><code class="language-plaintext">.
├── config.json
├── hornet              &lt;EXECUTABLE&gt;
├── p2pstore
│   ├── [...files]
├── snapshots           &lt;SNAPSHOT DIR&gt;
│   └── testnet
│       ├── delta_snapshot.bin
│       └── full_snapshot.bin
└── testnetdb           &lt;DB DIR&gt;
    ├── [...db files]
</code></pre>
<h2 id="plugins"><a class="header" href="#plugins">Plugins</a></h2>
<p>Hornet can be extended by plugins. Plugins are controlled via section <code>node</code> of the <code>config.json</code> file, specifically <code>disablePlugins</code> and <code>enablePlugins</code> keys:</p>
<pre><code class="language-json">&quot;node&quot;: {
    &quot;alias&quot;: &quot;Mainnet&quot;,
    &quot;profile&quot;: &quot;auto&quot;,
    &quot;disablePlugins&quot;: [],
    &quot;enablePlugins&quot;: []
  },
</code></pre>
<p>Additionally, plugins can be controlled via <a href="./post_installation.html">Dashboard/web interface</a>.</p>
<h2 id="spammer"><a class="header" href="#spammer">Spammer</a></h2>
<p>Hornet integrates a lightweight spamming plugin that spams the network with messages. Since the IOTA network is based on Directed Acyclic Graph in which new incoming messages are connected to previous messages (tips), it is healthy for the network to maintain some level of message rate.</p>
<p>The Spammer plugin allows your node to send a number of data messages at regular interval. The interval is set in the <code>mpsRateLimit</code> key, which is the number of messages per second (TPS) that the plugin should try to send.</p>
<p>For example, value <code>&quot;mpsRateLimit&quot;: 0.1</code> would mean to send 1 message every 10 seconds.</p>
<p>Needless to say, it is turned off by default:</p>
<pre><code class="language-json"> &quot;spammer&quot;: {
    &quot;message&quot;: &quot;Binary is the future.&quot;,
    &quot;index&quot;: &quot;HORNET Spammer&quot;,
    &quot;indexSemiLazy&quot;: &quot;HORNET Spammer Semi-Lazy&quot;,
    &quot;cpuMaxUsage&quot;: 0.8,
    &quot;mpsRateLimit&quot;: 0.0,
    &quot;workers&quot;: 0,
    &quot;autostart&quot;: false
  }
</code></pre>
<p><em>This plugin can be also leveraged during a spamming event during which the community tests the throughput of the network.</em></p>
<h2 id="snapshots"><a class="header" href="#snapshots">Snapshots</a></h2>
<p>Your node's ledger accumulates many messages, which uses a significant disk capacity over time. This topic discusses how to configure local snapshots to prune old transactions from your node's database and to create backup snapshot files.</p>
<pre><code class="language-json"> &quot;snapshots&quot;: {
    &quot;interval&quot;: 50,
    &quot;fullPath&quot;: &quot;snapshots/mainnet/full_snapshot.bin&quot;,
    &quot;deltaPath&quot;: &quot;snapshots/mainnet/delta_snapshot.bin&quot;,
    &quot;deltaSizeThresholdPercentage&quot;: 50.0,
    &quot;downloadURLs&quot;: [
      {
        &quot;full&quot;: &quot;https://ls.manapotion.io/full_snapshot.bin&quot;,
        &quot;delta&quot;: &quot;https://ls.manapotion.io/delta_snapshot.bin&quot;
      },
      {
        &quot;full&quot;: &quot;https://x-vps.com/full_snapshot.bin&quot;,
        &quot;delta&quot;: &quot;https://x-vps.com/delta_snapshot.bin&quot;
      },
      {
        &quot;full&quot;: &quot;https://dbfiles.iota.org/mainnet/hornet/full_snapshot.bin&quot;,
        &quot;delta&quot;: &quot;https://dbfiles.iota.org/mainnet/hornet/delta_snapshot.bin&quot;
      }
    ]
  },
  &quot;pruning&quot;: {
    &quot;milestones&quot;: {
      &quot;enabled&quot;: false,
      &quot;maxMilestonesToKeep&quot;: 60480
    },
    &quot;size&quot;: {
      &quot;enabled&quot;: true,
      &quot;targetSize&quot;: &quot;30GB&quot;,
      &quot;thresholdPercentage&quot;: 10.0,
      &quot;cooldownTime&quot;: &quot;5m&quot;
    },
    &quot;pruneReceipts&quot;: false
  },
</code></pre>
<h3 id="snapshot-pruning"><a class="header" href="#snapshot-pruning">Snapshot pruning</a></h3>
<p>During a snapshot, messages may be deleted from the ledger if they were confirmed by an old milestone. In other words, the term <code>pruning</code> means the deletion of the old history from the node database:</p>
<ul>
<li>To enable pruning, set the <code>pruning.milestones.enabled</code> or <code>pruning.size.enabled</code> key to enabled</li>
<li>The <code>pruning.milestones.maxMilestonesToKeep</code> defines how far back from the current confirmed milestone should be pruned</li>
<li>The <code>pruning.size.targetSize</code> defines the maximum database size, old data will be pruned.</li>
</ul>
<p>There are two types of snapshots:</p>
<p><strong>Delta snapshot</strong>
A delta snapshot points to a specific full snapshot, ie. delta snapshot consists of the changes since the last full snapshot.</p>
<p><strong>Full snapshot</strong>
The full snapshot includes the whole ledger state to a specific milestone and a solid entry point.</p>
<h3 id="how-to-work-with-snapshots"><a class="header" href="#how-to-work-with-snapshots">How to work with snapshots</a></h3>
<p>If your run Hornet node for the first time, you need to start it with a full-snapshot. <em>The Hornet downloads it for you automatically from trusted sources.</em></p>
<p>Additionally, you can start it with an specific delta snapshot.</p>
<p>You can use the Hornet tools for that:</p>
<pre><code class="language-bash">hornet tool
</code></pre>
<ul>
<li>snapgen: generates an initial snapshot for a private network</li>
<li>snapmerge: merges a full and delta snapshot into an updated full snapshot</li>
<li>snapinfo: outputs information about a snapshot file</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../post_installation/post_installation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../post_installation/config.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../post_installation/post_installation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../post_installation/config.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
